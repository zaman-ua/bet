## Мини-проект для ставок на спортивные матчи

### Основные требования
- Backend: в стиле OOP;
- Frontend: отправка данных без перезагрузки страницы;
- Для рендера HTML шаблонов можно использовать Twig 3 (https://twig.symfony.com/)
- Версия PHP 7+ (предпочтительно PHP 8).
- Использование OOP с соблюдением принципов SOLID.
- DTO для передачи данных.
- Возврат ответов на frontend с корректными HTTP статус кодами.
- Без использования фреймворков.
- Использование Composer для автозагрузки классов (без сторонних зависимостей).

### Краткое описание результата
Проект использует `PHP8.4` и `MySQL PDO`.  
Автозагрузка реализована благодаря `composer` по стандарту `PSR-4`  
Настроен `Docker` для локального развертывания. Запуск контейнера:
```sh
docker compose up -d --build
```
Проект будет доступен по http://localhost:8000 и phpMyAdmin http://localhost:8081  

Взаимодействие frontend с backend в основном через `$jQuery.ajax()`, что позволяет взаимодействовать без перезагрузки страницы.  
Для удобства реализован мини-роутер.  
Для удобства реализованы Request и Response классы, которые хоть и не дотягивают до стандарта PSR-7, но помогают в организации запросов и ответов приложения.  
Для удобства используется движок миграций phinx. Запуск миграций `php vendor/bin/phinx migrate` для запуска сидов `php vendor/bin/phinx seed:run`  
Для защиты применена механика csrf токена.  

Лучше всего серверная валидация показана в регистрации и в момент ставок пользователем.
Лучше всего разделение на сущности показано в контроллере ставок пользователя, там есть и валидация и транзакции и вынос бизнес-логики в отдельный слой сервисов.  

На проект потрачено 30 часов, некоторые моменты все еще можно улучшить, но уже не хватает времени. 
В отдельных частях проекта можно увидеть реализацию необходимых требований, но в других частях будет упущена валидация, возможно недостаточное дробление на слои и сущности.  

Внешний минимально простой, адаптируется на мобильном.  
Сама верстка и CSS оставляют желать лучшего и в основном собраны из примеров в интернете. Я мог бы сделать лучше, но так как frontend - не моя основная специализация, то потратил бы очень много времени.  

Структура базы данных разбита на понятные сущности, для связей используются ForeignKey, в потенциально тормозящих местах добавлены индексы. 
Базу не успеваю протестировать на большой нагрузке, в целом везде где используется ForeignKey, может потребоваться добавления обычного индекса (скорее всего составного из нескольких полей).  

Проект в процессе реализации подвергался отладке в `xdebug`.  


### Структура каталогов проекта

```text
|-- .docker             // настройки nginx для Docker
|
|-- app
|-- |-- Core            // основа приложения (роутинг, база, авторизация, http-запросы)
|-- |-- Domain          // ValueObject для денег
|-- |-- DTO             // DTO для передачи параметров
|-- |-- Enums           // перечисления
|-- |-- Exception       // исключения и глобальный обработчик ошибок
|-- |-- Http            // контроллеры
|-- |-- Repository      // репозитории для работы с базой
|-- |-- Services        // бизнес-логика
|-- |-- Validation      // валидаторы
|-- |-- bootstrap.php   // базовая инициализация приложения
|-- |-- helpers.php     // вспомогательные функции (глобальные) для удобства
|
|-- config              // настройки подключения к базе, конфигурация ставок, заданные матчи 
|-- database            // миграции, сиды, выгруженный sql с структурой и тестовыми данными
|
|-- public
|-- |-- assets          // стили, картинки, js
|-- |-- index.php       // точка входа
|-- |-- .htaccess       // для apache сервера 
|
|-- routes              // роуты
|-- templates           // шаблоны twig
|-- vendor 
|
|-- .env                // основной файл настроек
|-- .env.example
|-- .gitignore
|-- .htaccess           // для apache сервера 
|-- composer.json       // настройка автозагрузки и зависимости композера
|-- composer.lock       // фиксация версий зависимостей
|-- docker-compose.yml  // настройки Docker
|-- Dockerfile          // настройки Docker
|-- phinx.php           // настройки для запуска миграций через phinx
|-- README.md

```

